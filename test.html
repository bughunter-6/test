<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title> Browser Permissions Checks</title>
<style>
  body { font-family: Arial, sans-serif; padding: 30px; }
  button { margin: 6px 0; padding: 10px 14px; font-size: 15px; }
</style>
</head>
<body>

<h2>Browser Permissions Research</h2>

<button onclick="notify()">Notifications</button><br>
<button onclick="geo()">Geolocation</button><br>
<button onclick="camera()">Camera</button><br>
<button onclick="microphone()">Microphone</button><br>
<button onclick="cameraMic()">Camera + Mic</button><br>
<button onclick="screenShare()">Screen Share</button><br>
<button onclick="fullscreen()">Fullscreen</button><br>
<button onclick="multiDownload()">Multiple Downloads</button><br>
<button onclick="clipboardRead()">Clipboard Read</button><br>
<button onclick="clipboardWrite()">Clipboard Write</button><br>
<button onclick="persistentStorage()">Persistent Storage</button><br>
<button onclick="wakeLock()">Wake Lock</button><br>
<button onclick="deviceMotion()">Device Motion</button><br>
<button onclick="midi()">MIDI Access</button><br>
<button onclick="bluetooth()">Bluetooth</button><br>

<script>

/* Notifications */
function notify() {
  Notification.requestPermission().then(p => alert("Notification: " + p));
}

/* Geolocation */
function geo() {
  navigator.geolocation.getCurrentPosition(
    p => alert(`Lat: ${p.coords.latitude}, Lon: ${p.coords.longitude}`),
    e => alert("Geolocation denied")
  );
}

/* Camera */
function camera() {
  navigator.mediaDevices.getUserMedia({ video: true })
    .then(s => stop(s))
    .catch(() => alert("Camera denied"));
}

/* Microphone */
function microphone() {
  navigator.mediaDevices.getUserMedia({ audio: true })
    .then(s => stop(s))
    .catch(() => alert("Microphone denied"));
}

/* Camera + Mic */
function cameraMic() {
  navigator.mediaDevices.getUserMedia({ video: true, audio: true })
    .then(s => stop(s))
    .catch(() => alert("Camera/Mic denied"));
}

/* Screen Share */
function screenShare() {
  navigator.mediaDevices.getDisplayMedia({ video: true })
    .then(s => stop(s))
    .catch(() => alert("Screen share denied"));
}

/* Fullscreen */
function fullscreen() {
  document.documentElement.requestFullscreen()
    .catch(() => alert("Fullscreen denied"));
}

/* Multiple Downloads */
function multiDownload() {
  for (let i = 1; i <= 3; i++) {
    const a = document.createElement("a");
    a.href = "data:text/plain,Test download " + i;
    a.download = "file" + i + ".txt";
    document.body.appendChild(a);
    a.click();
    a.remove();
  }
}

/* Clipboard Read */
async function clipboardRead() {
  try {
    const t = await navigator.clipboard.readText();
    alert("Clipboard: " + t);
  } catch {
    alert("Clipboard read denied");
  }
}

/* Clipboard Write */
async function clipboardWrite() {
  try {
    await navigator.clipboard.writeText("Clipboard write test");
    alert("Clipboard write allowed");
  } catch {
    alert("Clipboard write denied");
  }
}

/* Persistent Storage */
function persistentStorage() {
  navigator.storage.persist().then(r => alert("Persistent storage: " + r));
}

/* Wake Lock */
async function wakeLock() {
  try {
    await navigator.wakeLock.request("screen");
    alert("Wake lock acquired");
  } catch {
    alert("Wake lock denied");
  }
}

/* Device Motion */
function deviceMotion() {
  if (DeviceMotionEvent?.requestPermission) {
    DeviceMotionEvent.requestPermission()
      .then(r => alert("Motion: " + r));
  } else {
    alert("Motion supported / auto-granted");
  }
}

/* MIDI */
function midi() {
  navigator.requestMIDIAccess()
    .then(() => alert("MIDI granted"))
    .catch(() => alert("MIDI denied"));
}

/* Bluetooth */
async function bluetooth() {
  try {
    await navigator.bluetooth.requestDevice({ acceptAllDevices: true });
    alert("Bluetooth granted");
  } catch {
    alert("Bluetooth denied");
  }
}

/* Helper */
function stop(stream) {
  stream.getTracks().forEach(t => t.stop());
  alert("Permission granted");
}

</script>

</body>
</html>
